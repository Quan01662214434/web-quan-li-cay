<!DOCTYPE html>
<html>
<head>
  <title>Thanh Huy·ªÅn Farm</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="layout">
  <aside class="sidebar">
    <h2>üå± Thanh Huy·ªÅn</h2>
    <a class="active">üå≥ C√¢y tr·ªìng</a>
  </aside>

  <main class="main">
    <div class="header">
      <h1>Qu·∫£n l√Ω c√¢y tr·ªìng</h1>
      <p>Danh s√°ch c√¢y & m√£ QR</p>
    </div>

    <div class="grid">
      <div class="card">
        <h3>T·ªïng s·ªë c√¢y</h3>
        <b id="total">0</b>
      </div>
      <div class="card">
        <h3>C√¢y kh·ªèe</h3>
        <b id="healthy">0</b>
      </div>
      <div class="card">
        <h3>C√¢y b·ªánh</h3>
        <b id="sick">0</b>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>T√™n c√¢y</th>
          <th>Khu</th>
          <th>V·ªã tr√≠</th>
          <th>T√¨nh tr·∫°ng</th>
          <th>QR</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="trees"></tbody>
    </table>
  </main>
</div>

<script>
fetch("/api/trees")
  .then(r => r.json())
  .then(data => {
    total.innerText = data.length;
    healthy.innerText = data.filter(t => t.currentHealth === "B√¨nh th∆∞·ªùng").length;
    sick.innerText = data.length - healthy.innerText;

    trees.innerHTML = data.map(t => `
      <tr>
        <td>${t.name} (${t.species})</td>
        <td>${t.area}</td>
        <td>${t.location}</td>
        <td>${t.currentHealth}</td>
        <td><img src="${t.qrCode}" width="60"></td>
        <td>
          <a class="btn outline" href="tree-edit.html?id=${t._id}">
            Qu·∫£n l√Ω
          </a>
        </td>
      </tr>
    `).join("");
  });
</script>

</body>
</html>
