<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Th√¥ng tin c√¢y - Thanh Huy·ªÅn Farm</title>
    <link rel="stylesheet" href="public.css" />
  </head>
  <body>
    <div class="public-container fade-in">
      <div class="public-header">
        <img src="logo.svg" alt="Thanh Huy·ªÅn Farm" class="logo-spin" />
        <h2>Thanh Huy·ªÅn Farm</h2>
        <p>V∆∞·ªùn s·∫ßu ri√™ng ƒë·∫°t chu·∫©n VietGAP</p>
      </div>

      <div class="tree-info" id="treeInfo">
        <p>ƒêang t·∫£i th√¥ng tin c√¢y...</p>
      </div>

      <div class="footer">
        <p>
          üåø Li√™n h·ªá: <b>Thanh Huy·ªÅn Farm</b><br />
          Hotline: 0912 345 678<br />
          ƒê·ªãa ch·ªâ: ·∫§p 3, x√£ H√≤a Kh√°nh, C√°i B√®, Ti·ªÅn Giang
        </p>
      </div>
    </div>

    <!-- Li√™n h·ªá n·ªïi -->
    <div class="floating-contact">
      <a
        href="https://zalo.me/0912345678"
        class="contact-btn zalo-btn"
        target="_blank"
        >Zalo</a
      >
      <a
        href="https://facebook.com/ThanhHuyenFarm"
        class="contact-btn fb-btn"
        target="_blank"
        >FB</a
      >
    </div>

    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("treeId");
      const API_BASE = "https://api.thefram.site";

      async function loadTree() {
        if (!id) return (treeInfo.innerHTML = "Kh√¥ng c√≥ m√£ c√¢y h·ª£p l·ªá!");
        const res = await fetch(`${API_BASE}/public/tree/${id}`);
        const data = await res.json();
        if (!res.ok || !data.tree)
          return (treeInfo.innerHTML = "Kh√¥ng t√¨m th·∫•y c√¢y n√†y!");

        const t = data.tree;
        treeInfo.innerHTML = `
          <div><b>T√™n c√¢y:</b> ${t.name}</div>
          <div><b>Gi·ªëng c√¢y:</b> ${t.species}</div>
          <div><b>V·ªã tr√≠:</b> ${t.location || "-"}</div>
          <div><b>Ng√†y tr·ªìng:</b> ${
            t.plantDate ? new Date(t.plantDate).toLocaleDateString("vi-VN") : "-"
          }</div>
          <div><b>M√£ s·ªë VietGAP:</b> ${t.vietGapCode || "-"}</div>
          <div><b>T√¨nh tr·∫°ng:</b> ${t.currentHealth || "B√¨nh th∆∞·ªùng"}</div>
          <div><b>Ghi ch√∫:</b> ${t.notes || "-"}</div>
        `;
      }

      loadTree();
    </script>
  </body>
</html>
